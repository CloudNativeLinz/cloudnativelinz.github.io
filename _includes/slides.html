{% assign events_with_slides = site.data.events | where_exp: "event", "event.slides != nil" %}
{% assign events_by_month = events_with_slides | group_by_exp: "event", "event.date | date: '%Y-%m'" %}
{% assign sorted_groups = events_by_month | sort: "name" | reverse %}
<div class="accordion">
  {% for group in sorted_groups %}
    <div class="accordion-item">
      <h2 class="accordion-header">
        {{ group.name | append: '-01' | date: '%B %Y' }}
      </h2>
      <div class="accordion-content">
        <ul>
          {% for event in group.items %}
            {% for slide in event.slides %}
              <li>
                <a href="{{ slide.url }}" class="slide-title">{{ slide.title }}</a>
                {% if slide.speaker %}
                  <p class="slide-speaker">{{ slide.speaker }}</p>
                {% endif %}
                {% if slide.file %}
                  <a href="{{ slide.file }}" class="slide-download">(Download PDF)</a>
                {% endif %}
              </li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endfor %}
</div>
